## 黄养滕——易出错的问题

### 对于某些特定对象才具有的方法，需要做类型检验

```js
//例如像数组对象才具有的方法  filter map find forEach

//易出错场景  从后台请求数据,后台的数据需要做一些转换
$.ajax({
    url:'xxx',
    success:function(data){
        //正常情况下，后台返回的是一个数组
        data.forEach(function(item){
            item._status=getStatus(item.status) //getStatus  1 ->'成功'
        })
    }
})

       
 //易出错场景
如果和后台没有约定好，当后台查不出数据时，会返回null ,然后就会报错 xx.forEach is not a function

```

```js
//示例代码
var res1=null
var res2=[
    {id:0,name:'xiaoming',age:11,sex:0},
    {id:1,name:'xiaohong',age:12,sex:1},
]


function getUserList(callback){
    setTimeout(function(){
        callback(res1)
    },1000)
}

// 例：
getUserList(function(data){
    data.forEach(function(item){
        item._sex=item.sex==0?'男':'女'
    })
    console.log(data)
})
```

类型检验方法   

*  对于基本类型 typeof 
* 对于对象类型   Array.isArray()

自己编写函数时，要对传入的参数做类型检验，参考：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach

### this指向问题

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach

```js
function Vue(options){
    this.userList=options.data.userList
    this.sexMap=options.data.sexMap
    this.mounted=options.mounted
    this.mounted()
}

new Vue({
    data:{
        userList:[{id:0,name:'xiaoming',sex:0},{id:1,name:'xiaohong',sex:1}],
        sexMap:{
            0:'男',
            1:'女'
        }
    },
    mounted(){
        this.userList.forEach(function(item){
            item._sex=this.sexMap(item.sex)
        })
    }
})
```

### vue中不能检测数据改变的情况

[https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9](https://cn.vuejs.org/v2/guide/list.html#注意事项)

```js
//管理员列表 启用 禁用
adminList[i].status=0
```

